{% extends "base.html" %}

{% block title %}{{ note.title }}{% endblock %}

{% block css %}
  <link rel="stylesheet" href="{{ url_for('static', filename='note.css') }}">
{% endblock %}

{% block content %}
    <div class="flex items-center gap-4 mb-4">
        <h1 class="text-xl font-bold">{{ note.title }}</h1>
        <a href="{{ url_for('notes.edit_note', note_id=note.id) }}" class="text-blue-500">編集</a>
        
        <form method="post" action="{{ url_for('notes.delete_note', note_id=note.id) }}" style="display:inline;" onsubmit="return confirm('本当に削除しますか？');">
            <!-- hidden csrf_token() -->
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
            
            <button type="submit" class="text-red-400">削除</button>
        </form>
    </div>

    <hr>

    <div class="bg-white p-6 rounded shadow markdown-body">
        {{ html_text | safe }}
    </div>

    <hr>

    <div class="flex items-center gap-4 pl-4 mt-4">
        <div>
            <a href="{{ url_for('notes.new_note') }}">新規作成</a>
        </div>
        <div>
            <a href="{{ url_for('notes.notes_index') }}">一覧へ戻る</a>
        </div>
    </div>
{% endblock %}

{% block javascript %}
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            if (typeof renderMathInElement === "undefined") return;

            renderMathInElement(document.body, {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false }
            ],
            throwOnError: false
            });
        });
    </script>
{% endblock %}

