{% extends "base.html" %}

{% block title %}ノート一覧{% endblock %}

{% block content %}
  <div class="flex justify-between items-center mb-4">
    <h1 class="text-3xl font-bold">ノート一覧</h1>
    <div class="ml-auto flex gap-7 items-center">
      <form action="{{ url_for('notes.notes_index') }}" method="get">
        {{ form.q.label }}
        {{ form.q(class="bg-white border rounded p-1") }}
        {{ form.submit(class="border rounded p-1") }}
      </form>
      <a href="{{ url_for('notes.new_note') }}" class="text-xl  bg-gray-300 rounded px-3 py-2">
        + 新規ノート作成
      </a>
    </div>
  </div>

  <hr />

  {% if notes %}
    <ul class="my-4">
      {% for note in notes %}
        <li class="mb-2 p-2 text-xl bg-gray-200 shadow rounded">
          <a href="{{ url_for('notes.show_note', note_id=note.id) }}">{{ note.title }}</a>
        </li>
      {% endfor %}
    </ul>
  {% elif form.q.data %}
    <p class="text-gray-600">一致するノートが見つかりませんでした。</p>
  {% else %}
    <p class="text-gray-600">まだノートがありません。</p>
  {% endif %}

  <hr />

  {% if total_pages > 1 %}
    <div class="mt-6 flex gap-2">
      {% for p in range(1, total_pages + 1) %}
        <a
          href="{{ url_for('notes.notes_index', page=p, q=form.q.data) }}"
          class="px-3 py-1 border rounded
                 {% if p == page %}bg-gray-400{% else %}bg-gray-200{% endif %}"
        >
          {{ p }}
        </a>
      {% endfor %}
    </div>
  {% endif %}
{% endblock %}
